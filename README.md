# KIOSK

## 프로그래밍 요구사항

### 필수 요구사항

- 메뉴 클래스는 이름, 설명 필드를 갖는다.
- 상품 클래스는 이름, 가격, 설명 필드를 갖는다.
- 삼품 클래스의 이름, 설명 필드는 메뉴 클래스를 상속받아 사용하는 구조로 개발한다.
- 주문 클래스를 만들어 상품 객체를 포함할 수 있도록 해야한다.

#### 화면 요구 사항

- 메인 메뉴판 화면
    - 메인 메뉴판이 출력되며 메뉴판에는 상품 메뉴가 출력된다.
        - 상품 메뉴에는 카테고리 메뉴와 상품 메뉴가 있다.
    - 상품 메뉴는 간단한 서명과 함께 출력 되며 최소 3개 이상 출력된다.
    - 상품 메뉴 아래에는 Order와 Cancel 옵션을 출력한다.
- 상품 메뉴판 화면
    - 상품 메뉴 선택 시 해당 카테고리의 메뉴판이 출력된다.
    - 메뉴판에는 각 메뉴의 이름과 가격과 간단한 설명이 표시된다.
    - 메뉴를 선택 시 장바구니에 추가되고, 중복으로 선택된 메뉴는 수량과 금액에 자동으로 반영된다.
- 구매 화면
    - 상품 선택시 상품에 따른 옵션 선택 화면시 출력된다.
        - `LARGER`, `ALE`, `SODA` 의 옵션: 사이즈(500ml, 700ml)
        - `SALAD`, `PIZZA` 의 옵션: 소스(없음, 꿀)
    - 욥션 선택 후 장바구니에 추가할지 확인하는 화면에 출력된다.
        - 장바구니에 추가 혹은 취소할 수 있는데, 취소하는 경우 상품 메뉴판 화면으로 돌아간다.
- 주문 화면
    - 메인 메뉴판 화면에서 주문을 선택하면 장바구니의 목록이 출력된다.
        - 장바구니에 추가된 상품은 이름, 가격, 수량, 설명이 표시된다.
        - 주문과 메뉴판 메뉴가 있고, 주문을 선택하면 주문완료 화면이 표시되고 메뉴판을 선택하면 메인 메뉴판이 출력된다.
- 주문 완료 화면
    - 주문완료에 대한 대기번호를 발급하고, 3초 뒤에 메인 메뉴판 화면으로 돌아간다.
- 주문 취소 화면
    - 주문 취소 메뉴를 선택하면 주문 취소 화면이 나타나고, 현재 장바구니에 담겨 있는 상품을 취소시킨 후 메인 메뉴판을 출력한다.
- 관리자 화면
    - 관리자는 특정 입력을 통해서 현재 총 판매액과 판매 내역을 확인할 수 있다.
    - 특정 입력을 통해서 kiosk를 종료시킬 수 있다.

## 기술 스택

- JDK 17
- Gradle
- IntelliJ Ultimate

### 클래스 요청 흐름
<img width=400 src="https://github.com/DevFrog92/kiosk/assets/82052272/2e7d2a9c-93fa-4200-8960-ccebca0e5bfa"/>

### 구현 결과

<img width="400" alt="image" src="https://github.com/DevFrog92/kiosk/assets/82052272/5a8374c6-87aa-4b62-b017-a8734e79aac1"> <br/>
<img width="400" alt="image" src="https://github.com/DevFrog92/kiosk/assets/82052272/bf628e1a-ff85-451e-b728-2ff11154ed4e"> <br/>
<img width="400" alt="image" src="https://github.com/DevFrog92/kiosk/assets/82052272/ce2f1f3c-4be1-4030-a510-9c7c03abb384"> <br/>
<img width="400" alt="image" src="https://github.com/DevFrog92/kiosk/assets/82052272/59daa956-c780-437a-bdd4-a2b87eed1093"> <br/>
<img width="400" alt="image" src="https://github.com/DevFrog92/kiosk/assets/82052272/9d16a40c-763f-4b05-84b4-6b317258d20d"> <br/>
<img width="400" alt="image" src="https://github.com/DevFrog92/kiosk/assets/82052272/f7002732-902e-4b3b-912c-2896882628f9"> 

### 구현 과정

- 범용적인 kiosk 개발: 이번 kiosk 개발에서 집중한 부분은 단순히 하나의 매장에서 사용하는 것이 아닌 식품 판매 도멘인에 모두 적용할
  수 있도록 개발하는 것이 었다. 이를 위해서 데이터와 화면, 처리를 모두 독릭적으로 분리하기 위해서 노력했다.
- enum 데이터 클래스: 현재 명세에는 데이터베이스가 없지만 필요한 kiosk의 경우 특정 메뉴에 대한 데이터가 필요하다. 그래서 메뉴
  카테고리 데이터와 메뉴 상품 데이터를 enum 클래스를 사용해서 구현하였다. 그리고 데이터는 언제나 변경될 수 있기 때문에 비즈니스 로직과
  화면에서 직접 접근하지 않고 Manager 클래스를 통해서 접근할 수 있도록 구현했다.
- core 클래스: kiosk는 사용자의 다양한 입력에 따른 각기 다른 화면을 출력해야 한다. 이때 사용자의 입력을 받는 클래스를 여러개
  사용할 경우 중복 코드 및 유지 보수에 어려움이 있을 수 있다고 생각했다. 그래서 Core 클래스를 두어서 사용자의 입력에 대한 처리를
  중앙화 하였다. 이러한 구현은 디자인 패턴에서 Front Controller 패턴을 참고하였다. Front Controller 패턴은
  말그대로 한명의 관리자가 요청의 흐름을 관리하는 것으로 요청이 중앙에 집중될 수 있다. 하지만 Core 클래스를 구현하면서 모든 요청에 대한
  흐름 처리를 위해 의존성이 과해지는 문제가 있지만, 외존성이 분산화 되고 중복된 코드로 인한 처리 누락을 막기 위해서 Front
  Controller 패턴을 적용하였다. (Front Controller 패턴은 Spring에서 핵심적으로 사용하면 패턴으로
  DispatcherServlet이 그 역할을 수행한다)
- 사용자 입력에 대한 enum 클래스: kiosk는 특성상 사용자의 다양한 입력을 받을 수 있다. 명세의 예시에는 사용자의 입력에 대해서 1,
  2와 같은 번호로 입력받게 되어있다. 하지만 특정하게 의미가 없는 숫자는 매직 넘버로 다양한 문제를 발생시킬 수 있다. 민약 점주의 요청으로
  kiosk의 화면 출력 구성이 변경되는 경우, 추가적인 사용자 입력 메뉴가 추가되는 경우 등 다양한 변경사항이 있는 경우 의미가 없는 매직
  넘버는 헙업에서 많은 혼란을 만들 수 있다고 생각한다. 이러한 혼란을 제거하고자 사용자의 입력에 대한 값을 enum으로 맴핑해두었다. 만약
  변경사항이 발생하더라도 enum만 갱신해 주면 다양한 사용자의 입력에 대응할 수 있게 되었다.
- 사용자의 입력을 받은 util 클래스: kiosk는 사용자의 입력을 받을 수 있어야 한다. 이때 중요한 점은 사용자의 입력에 대한 유효성
  검증이다. 사용자가 유효하지 않은 입력을 할 경우 적절한 경고 메시지를 보여주고, 재입력을 받을 수 있어야 한다. 그리고 이러한 로직은 모든
  화면에서 동일하게 필요하는 기능이다. 이를 해결하기 위해서 Java 8의 메서드 참조를 사용했다. 메서드 참조는 Java 8의 람다와 함께
  소개되었다. 다음의 코드는 사용자의 입력을 받아 유효하다면 입력을 반환하고, 유효하지 않는 경우 예외를 발생시킨다.
  ```java
   public static <T> T readCommandInput(final IntFunction<T> resultMapper) {
        T result;
        while (true) {
            try {
                result = resultMapper.apply(Integer.parseInt(read()));
                break;
            } catch (IllegalArgumentException e) {
                System.out.println(INVALID_USER_INPUT);
            }
        }

        return result;
    }
  ```
  
  readCommandInput 메서드는 함수를 매개변수로 전달받게 된다. 이는 자바에서 함수를 입급 객체로 취급하지 않지만, 함수형 인터페이스라는 개념을 통해 메서드 참조가 내부적으로 익명 클래스로 처리됨으로 가능하게 되었다.
